<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>The default library sandbox — sandbox • renv</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Source_Sans_Pro-0.4.9/font.css" rel="stylesheet"><link href="../deps/Source_Code_Pro-0.4.9/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="The default library sandbox — sandbox"><meta name="description" content="An R installation can have up to three types of library paths available
to the user:
The user library, where R packages downloaded and installed by the
current user are installed. This library path is only visible to that
specific user.
The site library, where R packages maintained by administrators of a
system are installed. This library path, if it exists, is visible to all
users on the system.
The default library, where R packages distributed with R itself are
installed. This library path is visible to all users on the system.


Normally, only so-called &quot;base&quot; and &quot;recommended&quot; packages should be installed
in the default library. (You can get a list of these packages with
installed.packages(priority = c(&quot;base&quot;, &quot;recommended&quot;))). However, it is
possible for users and administrators to install packages into the default
library, if the filesystem permissions permit them to do so. (This, for
example, is the default behavior on macOS.)
Because the site and default libraries are visible to all users, having those
accessible in renv projects can potentially break isolation – that is,
if a package were updated in the default library, that update would be visible
to all R projects on the system.
To help defend against this, renv uses something called the &quot;sandbox&quot; to
isolate renv projects from non-&quot;base&quot; packages that are installed into the
default library. When an renv project is loaded, renv will:
Create a new, empty library path (called the &quot;sandbox&quot;),
Link only the &quot;base&quot; and &quot;recommended&quot; packages from the default library
into the sandbox,
Mark the sandbox as read-only, so that users are unable to install packages
into this library,
Instruct the R session to use the &quot;sandbox&quot; as the default library.


This process is mostly transparent to the user. However, because the sandbox
is read-only, if you later need to remove the sandbox, you'll need to reset
file permissions manually; for example, with renv::sandbox$unlock().
If you'd prefer to keep the sandbox unlocked, you can also set:
RENV_SANDBOX_LOCKING_ENABLED = FALSE

in an appropriate startup .Renviron or Renviron.site file.
The sandbox can also be disabled entirely with:
RENV_CONFIG_SANDBOX_ENABLED = FALSE

The sandbox library path can also be configured using the RENV_PATHS_SANDBOX
environment variable: see paths for more details."><meta property="og:description" content="An R installation can have up to three types of library paths available
to the user:
The user library, where R packages downloaded and installed by the
current user are installed. This library path is only visible to that
specific user.
The site library, where R packages maintained by administrators of a
system are installed. This library path, if it exists, is visible to all
users on the system.
The default library, where R packages distributed with R itself are
installed. This library path is visible to all users on the system.


Normally, only so-called &quot;base&quot; and &quot;recommended&quot; packages should be installed
in the default library. (You can get a list of these packages with
installed.packages(priority = c(&quot;base&quot;, &quot;recommended&quot;))). However, it is
possible for users and administrators to install packages into the default
library, if the filesystem permissions permit them to do so. (This, for
example, is the default behavior on macOS.)
Because the site and default libraries are visible to all users, having those
accessible in renv projects can potentially break isolation – that is,
if a package were updated in the default library, that update would be visible
to all R projects on the system.
To help defend against this, renv uses something called the &quot;sandbox&quot; to
isolate renv projects from non-&quot;base&quot; packages that are installed into the
default library. When an renv project is loaded, renv will:
Create a new, empty library path (called the &quot;sandbox&quot;),
Link only the &quot;base&quot; and &quot;recommended&quot; packages from the default library
into the sandbox,
Mark the sandbox as read-only, so that users are unable to install packages
into this library,
Instruct the R session to use the &quot;sandbox&quot; as the default library.


This process is mostly transparent to the user. However, because the sandbox
is read-only, if you later need to remove the sandbox, you'll need to reset
file permissions manually; for example, with renv::sandbox$unlock().
If you'd prefer to keep the sandbox unlocked, you can also set:
RENV_SANDBOX_LOCKING_ENABLED = FALSE

in an appropriate startup .Renviron or Renviron.site file.
The sandbox can also be disabled entirely with:
RENV_CONFIG_SANDBOX_ENABLED = FALSE

The sandbox library path can also be configured using the RENV_PATHS_SANDBOX
environment variable: see paths for more details."><meta property="og:image" content="https://rstudio.github.io/renv/logo.svg"><!-- Google Tag Manager --><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-KHBDBW7');</script><!-- End Google Tag Manager --></head><body>
    <a href="#container" class="visually-hidden-focusable">Skip to content</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-none" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">renv</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">1.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/renv.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Basics</h6></li>
    <li><a class="dropdown-item" href="../articles/package-sources.html">Package sources</a></li>
    <li><a class="dropdown-item" href="../articles/package-install.html">Installing packages</a></li>
    <li><a class="dropdown-item" href="../articles/python.html">Using Python with renv</a></li>
    <li><a class="dropdown-item" href="../articles/faq.html">Frequently asked questions</a></li>
    <li><a class="dropdown-item" href="../articles/packrat.html">packrat vs. renv</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Deployment</h6></li>
    <li><a class="dropdown-item" href="../articles/ci.html">Using renv with continuous integration</a></li>
    <li><a class="dropdown-item" href="../articles/docker.html">Using renv with Docker</a></li>
    <li><a class="dropdown-item" href="../articles/rsconnect.html">Using renv with Posit Connect</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Advanced</h6></li>
    <li><a class="dropdown-item" href="../articles/packages.html">Package development</a></li>
    <li><a class="dropdown-item" href="../articles/profiles.html">Project profiles</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/rstudio/renv/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic" id="container">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>The default library sandbox</h1>
      <small class="dont-index">Source: <a href="https://github.com/rstudio/renv/blob/main/R/sandbox.R" class="external-link"><code>R/sandbox.R</code></a></small>
      <div class="d-none name"><code>sandbox.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>An <span style="R">R</span> installation can have up to three types of library paths available
to the user:</p><ul><li><p>The <em>user library</em>, where <span style="R">R</span> packages downloaded and installed by the
current user are installed. This library path is only visible to that
specific user.</p></li>
<li><p>The <em>site library</em>, where <span style="R">R</span> packages maintained by administrators of a
system are installed. This library path, if it exists, is visible to all
users on the system.</p></li>
<li><p>The <em>default library</em>, where <span style="R">R</span> packages distributed with <span style="R">R</span> itself are
installed. This library path is visible to all users on the system.</p></li>
</ul><p>Normally, only so-called "base" and "recommended" packages should be installed
in the default library. (You can get a list of these packages with
<code>installed.packages(priority = c("base", "recommended"))</code>). However, it is
possible for users and administrators to install packages into the default
library, if the filesystem permissions permit them to do so. (This, for
example, is the default behavior on macOS.)</p>
<p>Because the site and default libraries are visible to all users, having those
accessible in renv projects can potentially break isolation – that is,
if a package were updated in the default library, that update would be visible
to all <span style="R">R</span> projects on the system.</p>
<p>To help defend against this, renv uses something called the "sandbox" to
isolate renv projects from non-"base" packages that are installed into the
default library. When an renv project is loaded, renv will:</p><ul><li><p>Create a new, empty library path (called the "sandbox"),</p></li>
<li><p>Link only the "base" and "recommended" packages from the default library
into the sandbox,</p></li>
<li><p>Mark the sandbox as read-only, so that users are unable to install packages
into this library,</p></li>
<li><p>Instruct the <span style="R">R</span> session to use the "sandbox" as the default library.</p></li>
</ul><p>This process is mostly transparent to the user. However, because the sandbox
is read-only, if you later need to remove the sandbox, you'll need to reset
file permissions manually; for example, with <code>renv::sandbox$unlock()</code>.</p>
<p>If you'd prefer to keep the sandbox unlocked, you can also set:</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a>RENV_SANDBOX_LOCKING_ENABLED <span class="ot">=</span> <span class="cn">FALSE</span></span></code></pre><p></p></div>
<p>in an appropriate startup <code>.Renviron</code> or <code>Renviron.site</code> file.</p>
<p>The sandbox can also be disabled entirely with:</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a>RENV_CONFIG_SANDBOX_ENABLED <span class="ot">=</span> <span class="cn">FALSE</span></span></code></pre><p></p></div>
<p>The sandbox library path can also be configured using the <code>RENV_PATHS_SANDBOX</code>
environment variable: see <a href="paths.html">paths</a> for more details.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="va">sandbox</span></span></code></pre></div>
    </div>


  </main></div>


   </div>
  <footer><div class="container">
  <div class="pkgdown-footer-left">
  <p>Developed by Kevin Ushey, <a href="https://hadley.nz" class="external-link">Hadley Wickham</a>, <a href="https://www.posit.co" class="external-link"><img src="https://www.tidyverse.org/posit-logo.svg" alt="Posit" height="16" width="62" style="margin-bottom: 3px;"></a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

  </div></footer><!-- Google Tag Manager (noscript) --><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KHBDBW7" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->


  </body></html>

