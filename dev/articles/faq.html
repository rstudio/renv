<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Frequently asked questions • renv</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Source_Sans_Pro-0.4.10/font.css" rel="stylesheet">
<link href="../deps/Source_Code_Pro-0.4.10/font.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Frequently asked questions">
<meta name="robots" content="noindex">
<!-- Google Tag Manager --><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-KHBDBW7');</script><!-- End Google Tag Manager -->
</head>
<body>
    <a href="#container" class="visually-hidden-focusable">Skip to content</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-none" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">renv</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">1.1.4.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/renv.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Basics</h6></li>
    <li><a class="dropdown-item" href="../articles/package-sources.html">Package sources</a></li>
    <li><a class="dropdown-item" href="../articles/package-install.html">Installing packages</a></li>
    <li><a class="dropdown-item" href="../articles/python.html">Using Python with renv</a></li>
    <li><a class="dropdown-item" href="../articles/faq.html">Frequently asked questions</a></li>
    <li><a class="dropdown-item" href="../articles/packrat.html">packrat vs. renv</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Deployment</h6></li>
    <li><a class="dropdown-item" href="../articles/ci.html">Using renv with continuous integration</a></li>
    <li><a class="dropdown-item" href="../articles/docker.html">Using renv with Docker</a></li>
    <li><a class="dropdown-item" href="../articles/rsconnect.html">Using renv with Posit Connect</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Advanced</h6></li>
    <li><a class="dropdown-item" href="../articles/packages.html">Package development</a></li>
    <li><a class="dropdown-item" href="../articles/profiles.html">Project profiles</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/rstudio/renv/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article" id="container">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Frequently asked questions</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/rstudio/renv/blob/main/vignettes/faq.Rmd" class="external-link"><code>vignettes/faq.Rmd</code></a></small>
      <div class="d-none name"><code>faq.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="why-isnt-my-package-being-snapshotted-into-the-lockfile">Why isn’t my package being snapshotted into the lockfile?<a class="anchor" aria-label="anchor" href="#why-isnt-my-package-being-snapshotted-into-the-lockfile"></a>
</h2>
<p>For a package to be recorded in the lockfile, it must be both:</p>
<ol style="list-style-type: decimal">
<li><p>Installed your project library, <em>and</em></p></li>
<li><p>Used by the project, as determined by
<code><a href="../reference/dependencies.html">renv::dependencies()</a></code>.</p></li>
</ol>
<p>This ensures that only the packages you truly require for your
project will enter the lockfile; development dependencies
(e.g. <code>devtools</code>) normally should not.</p>
<p>So if you find a package is not entering the lockfile, check the
output of <code><a href="../reference/dependencies.html">renv::dependencies()</a></code>. If an expected package is
not listed, it’s likely because <code><a href="../reference/dependencies.html">dependencies()</a></code> uses static
analysis and does not understand all of the different ways in which a
package might be used in a project. See the docs for more details.</p>
<div class="section level3">
<h3 id="capturing-all-dependencies">Capturing all dependencies<a class="anchor" aria-label="anchor" href="#capturing-all-dependencies"></a>
</h3>
<p>If you’d instead prefer to capture <em>all</em> packages installed
into your project library (and eschew dependency discovery altogether),
you can do so with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">renv</span><span class="fu">::</span><span class="va"><a href="../reference/settings.html">settings</a></span><span class="op">$</span><span class="fu">snapshot.type</span><span class="op">(</span><span class="st">"all"</span><span class="op">)</span></span></code></pre></div>
<p>Packages can also be explicitly ignored through a project setting,
e.g. with:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">renv</span><span class="fu">::</span><span class="va"><a href="../reference/settings.html">settings</a></span><span class="op">$</span><span class="fu">ignored.packages</span><span class="op">(</span><span class="st">"&lt;package&gt;"</span><span class="op">)</span></span></code></pre></div>
<p>You might also want to double-check the set of ignored packages
(<code>renv::settings$ignored.packages()</code>) and confirm that you
aren’t unintentionally ignoring a package you actually require.</p>
<p>See the documentation in <code><a href="../reference/snapshot.html">?snapshot</a></code> for more details.</p>
</div>
<div class="section level3">
<h3 id="capturing-explicit-dependencies">Capturing explicit dependencies<a class="anchor" aria-label="anchor" href="#capturing-explicit-dependencies"></a>
</h3>
<p>If you’d like to explicitly declare which packages your project
depends on, you can do so by telling renv to form “explicit”
snapshots:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">renv</span><span class="fu">::</span><span class="va"><a href="../reference/settings.html">settings</a></span><span class="op">$</span><span class="fu">snapshot.type</span><span class="op">(</span><span class="st">"explicit"</span><span class="op">)</span></span></code></pre></div>
<p>In this mode, renv will only include packages which are explicitly
listed in the project’s <code>DESCRIPTION</code> file as
dependencies.</p>
</div>
</div>
<div class="section level2">
<h2 id="how-do-i-update-the-lockfile">How do I update the lockfile?<a class="anchor" aria-label="anchor" href="#how-do-i-update-the-lockfile"></a>
</h2>
<p>The most important thing to remember is that
<code><a href="../reference/snapshot.html">renv::snapshot()</a></code> captures the state of your project at the
point in time when <code><a href="../reference/snapshot.html">renv::snapshot()</a></code> was called. In that
sense, the “right” way to update the lockfile is to:</p>
<ol style="list-style-type: decimal">
<li>Load the renv project,</li>
<li>Make the changes you want; e.g. install packages; call
<code>options(repos = &lt;...&gt;)</code>; …</li>
<li>Call <code><a href="../reference/snapshot.html">renv::snapshot()</a></code> to update the lockfile.</li>
</ol>
<p>That said, you are also free to modify the <code>renv.lock</code>
lockfile by hand if necessary; e.g. if you want to manually add / change
repositories, change the version of a package used, and so on. The
<code>renv.lock</code> lockfile is a <a href="https://www.json.org/json-en.html" class="external-link">JSON</a> file. A <a href="https://json-schema.org/" class="external-link">JSON schema</a> is provided in the <a href="https://github.com/rstudio/renv/tree/main/inst/schema" class="external-link">renv
repository</a>.</p>
<p>The main downside to editing a package record in the lockfile
directly is that you won’t be able to provide a <code>Hash</code> for
that package, and so renv won’t be able to use its global package cache
when installing that package.</p>
</div>
<div class="section level2">
<h2 id="how-should-i-handle-development-dependencies">How should I handle development dependencies?<a class="anchor" aria-label="anchor" href="#how-should-i-handle-development-dependencies"></a>
</h2>
<p>This is related to the above question: by design,
<code>renv.lock</code> normally only captures build-time or deploy-time
dependencies; it may not capture the packages that you use in iterative
workflows (e.g. <code>devtools</code>). However, you may want some way
of still ensuring these development dependencies get installed when
trying to restore a project library.</p>
<p>For cases like these, we recommend tracking these packages in a
project DESCRIPTION file; typically, within the <code>Suggests:</code>
field. Then, you can execute:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">renv</span><span class="fu">::</span><span class="fu"><a href="../reference/install.html">install</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>to request that renv install the packages as described in the
DESCRIPTION file. In addition, the <code>Remotes:</code> fields will be
parsed and used, to ensure packages are installed from their declared
remote source as appropriate.</p>
</div>
<div class="section level2">
<h2 id="im-returning-to-an-older-renv-project--what-do-i-do">I’m returning to an older renv project. What do I do?<a class="anchor" aria-label="anchor" href="#im-returning-to-an-older-renv-project--what-do-i-do"></a>
</h2>
<p>Suppose you were using renv to manage an older project’s
dependencies. You have an older lockfile, capturing the dependencies in
use when you were last working with that project. You now need to resume
work on this project – what do you do?</p>
<p>The answer depends on how exactly you want to use the project. Do you
want to treat it as a “time capsule”, with dependencies frozen in time?
Or are the dependencies in this project fluid, and you are primarily
using renv just for isolation of project dependencies?</p>
<p>For time capsules, use <code><a href="../reference/restore.html">renv::restore()</a></code> to reinstall the
exact packages as declared in the project lockfile
<code>renv.lock</code>. You may also need to find and install the older
version of R used previously with that project, unless your intention is
to upgrade R.</p>
<p>For projects with fluid dependencies, call
<code><a href="../reference/update.html">renv::update()</a></code> to get the latest versions of the
dependencies. Once you’ve verified that the code still works (or made
the changes needed to get it working), call
<code><a href="../reference/snapshot.html">renv::snapshot()</a></code> to record the latest versions.</p>
<p>You can also take a more managed approach, that’s somewhat in between
the two extremes:</p>
<ol style="list-style-type: decimal">
<li><p>Use <code><a href="../reference/restore.html">renv::restore()</a></code> to restore the project state as
defined in the lockfile.</p></li>
<li><p>Install and update packages deliberately with
<code><a href="../reference/install.html">renv::install()</a></code> and friends.</p></li>
<li><p>Verify your code works, then call <code><a href="../reference/snapshot.html">renv::snapshot()</a></code>
to update the new lockfile.</p></li>
</ol>
</div>
<div class="section level2">
<h2 id="why-are-package-downloads-failing">Why are package downloads failing?<a class="anchor" aria-label="anchor" href="#why-are-package-downloads-failing"></a>
</h2>
<p>Some issues ultimately boil down to a lack of connectivity between
your machine and the R package repositories and remote sources you are
trying to use. If you are working in a corporate environment, it may be
worth confirming whether you have a corporate proxy in place inhibiting
internet access, or whether R and renv need to be configured in a way
compatible with your working environment. This is often true on Windows
machines in enterprise environments, where the default “wininet”
download method may work more reliably than others. Learn more in
<code><a href="../articles/package-install.html">vignette("package-install")</a></code>.</p>
<p>In addition, note that renv places shims on the R search path that
re-routes calls from <code><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages()</a></code> to
<code><a href="../reference/install.html">renv::install()</a></code>. If you need to bypass these shims, you can
use <code>utils::install.packages(&lt;...&gt;)</code>; that is, with the
call to <code><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages()</a></code> explicitly qualified with the
package <code>utils::</code>. See <code><a href="../reference/load.html">?renv::load</a></code> more
details.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



   </div>
  <footer><div class="container">
  <div class="pkgdown-footer-left">
  <p>Developed by Kevin Ushey, <a href="https://hadley.nz" class="external-link">Hadley Wickham</a>, <a href="https://www.posit.co" class="external-link"><img src="https://www.tidyverse.org/posit-logo.svg" alt="Posit" height="16" width="62" style="margin-bottom: 3px;"></a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

  </div></footer><!-- Google Tag Manager (noscript) --><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KHBDBW7" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->


  </body>
</html>
