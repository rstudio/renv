<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content='dependencies() will crawl files within your project, looking for R files
and the packages used within those R files. This is done primarily by
parsing the code and looking for calls of the form library(package),
require(package), requireNamespace("package"), and package::method().
renv also supports package loading with
box (box::use(...)) and
pacman (pacman::p_load(...))
.
For R package projects, dependencies expressed in the DESCRIPTION file
will also be discovered.
Note that the rmarkdown package is required in order to crawl dependencies
in R Markdown files.'><title>Find R Package Dependencies in a Project — dependencies • renv</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><link href="../deps/Source_Sans_Pro-0.4.6/font.css" rel="stylesheet"><link href="../deps/Source_Code_Pro-0.4.6/font.css" rel="stylesheet"><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Find R Package Dependencies in a Project — dependencies"><meta property="og:description" content='dependencies() will crawl files within your project, looking for R files
and the packages used within those R files. This is done primarily by
parsing the code and looking for calls of the form library(package),
require(package), requireNamespace("package"), and package::method().
renv also supports package loading with
box (box::use(...)) and
pacman (pacman::p_load(...))
.
For R package projects, dependencies expressed in the DESCRIPTION file
will also be discovered.
Note that the rmarkdown package is required in order to crawl dependencies
in R Markdown files.'><meta property="og:image" content="https://rstudio.github.io/renv/logo.svg"><meta name="robots" content="noindex"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Google Tag Manager --><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-KHBDBW7');</script><!-- End Google Tag Manager --></head><body>
    <a href="#container" class="visually-hidden-focusable">Skip to content</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-none"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">renv</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">0.17.3-47</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/renv.html">Get started</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <h6 class="dropdown-header" data-toc-skip>Basics</h6>
    <a class="dropdown-item" href="../articles/package-sources.html">Package sources</a>
    <a class="dropdown-item" href="../articles/package-install.html">Installing packages</a>
    <a class="dropdown-item" href="../articles/python.html">Using Python with renv</a>
    <a class="dropdown-item" href="../articles/faq.html">Frequently asked questions</a>
    <a class="dropdown-item" href="../articles/packrat.html">packrat vs renv</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Deployment</h6>
    <a class="dropdown-item" href="../articles/ci.html">Using renv with continuous integration</a>
    <a class="dropdown-item" href="../articles/docker.html">Using renv with Docker</a>
    <a class="dropdown-item" href="../articles/rsconnect.html">Using renv with Posit Connect</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Advanced</h6>
    <a class="dropdown-item" href="../articles/packages.html">Package development</a>
    <a class="dropdown-item" href="../articles/profiles.html">Project profiles</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/rstudio/renv/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic" id="container">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Find R Package Dependencies in a Project</h1>
      <small class="dont-index">Source: <a href="https://github.com/rstudio/renv/blob/HEAD/R/dependencies.R" class="external-link"><code>R/dependencies.R</code></a></small>
      <div class="d-none name"><code>dependencies.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>dependencies()</code> will crawl files within your project, looking for <span style="R">R</span> files
and the packages used within those <span style="R">R</span> files. This is done primarily by
parsing the code and looking for calls of the form <code><a href="https://rdrr.io/r/base/library.html" class="external-link">library(package)</a></code>,
<code><a href="https://rdrr.io/r/base/library.html" class="external-link">require(package)</a></code>, <code><a href="https://rdrr.io/r/base/ns-load.html" class="external-link">requireNamespace("package")</a></code>, and <code>package::method()</code>.
renv also supports package loading with
<a href="https://cran.r-project.org/package=box" class="external-link">box</a> (<code>box::use(...)</code>) and
<a href="https://cran.r-project.org/package=pacman" class="external-link">pacman</a> (<code>pacman::p_load(...)</code>)
.</p>
<p>For <span style="R">R</span> package projects, dependencies expressed in the <code>DESCRIPTION</code> file
will also be discovered.</p>
<p>Note that the rmarkdown package is required in order to crawl dependencies
in R Markdown files.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">dependencies</span><span class="op">(</span></span>
<span>  path <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">getwd</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  root <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  progress <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  errors <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"reported"</span>, <span class="st">"fatal"</span>, <span class="st">"ignored"</span><span class="op">)</span>,</span>
<span>  dev <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>path</dt>
<dd><p>The path to a (possibly multi-mode) <span style="R">R</span> file, or a directory
containing such files. By default, all files within the current working
directory are checked, recursively.</p></dd>


<dt>root</dt>
<dd><p>The root directory to be used for dependency discovery.
Defaults to the active project directory. You may need to set this
explicitly to ensure that your project's <code>.renvignore</code>s (if any) are
properly handled.</p></dd>


<dt>...</dt>
<dd><p>Unused arguments, reserved for future expansion. If any arguments
are matched to <code>...</code>, renv will signal an error.</p></dd>


<dt>progress</dt>
<dd><p>Boolean; report progress output while enumerating
dependencies?</p></dd>


<dt>errors</dt>
<dd><p>How should errors that occur during dependency enumeration be
handled?</p><ul><li><p><code>"reported"</code> (the default): errors are reported to the user, but
otherwise ignored.</p></li>
<li><p><code>"fatal"</code>: errors are fatal and stop execution.</p></li>
<li><p><code>"ignored"</code>: errors are ignored and not reported to the user.</p></li>
</ul></dd>


<dt>dev</dt>
<dd><p>Boolean; include 'development' dependencies as well? That is,
packages which may be required during development but are unlikely to be
required during runtime for your project. By default, only runtime
dependencies are returned.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>An <span style="R">R</span></p>
<p></p>
<p><code>data.frame</code> of discovered dependencies, mapping inferred
package names to the files in which they were discovered. Note that the
<code>Package</code> field might name a package remote, rather than just a plain
package name.</p>
    </div>
    <div class="section level2">
    <h2 id="missing-dependencies">Missing dependencies<a class="anchor" aria-label="anchor" href="#missing-dependencies"></a></h2>
    <p><code>dependencies()</code> uses static analysis to determine which packages are used
by your project. This means that it inspects, but doesn't run, your
source. Static analysis generally works well, but is not 100% reliable in
detecting the packages required by your project. For example, renv is
unable to detect this kind of usage:</p>
<p></p><div class="sourceCode r"><pre><code><span><span class="kw">for</span> <span class="op">(</span><span class="va">package</span> <span class="kw">in</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"dplyr"</span>, <span class="st">"ggplot2"</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">package</span>, character.only <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre><p></p></div>
<p>It also can't generally tell if one of the packages you use, uses one of
its suggested packages. For example, <code>tidyr::separate_wider_delim()</code>
uses the stringr package which is only suggested, not required by tidyr.</p>
<p>If you find that renv's dependency discovery misses one or more packages
that you actually use in your project, one escape hatch is to include a file
called <code>_dependencies.R</code> that includes straightforward library calls:</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)</span></code></pre><p></p></div>
    </div>
    <div class="section level2">
    <h2 id="explicit-dependencies">Explicit dependencies<a class="anchor" aria-label="anchor" href="#explicit-dependencies"></a></h2>
    <p>Alternatively, you can suppress dependency discover and instead rely
on an explicit set of packages recorded by you in a project <code>DESCRIPTION</code> file.
Call <code>renv::settings$snapshot.type("explicit")</code> to enable "explicit" mode,
then enumerate your dependencies in a project <code>DESCRIPTION</code> file.</p>
<p>In that case, your <code>DESCRIPTION</code> might look something like this:</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>Type<span class="sc">:</span> project</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>Description<span class="sc">:</span> My project.</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>Depends<span class="sc">:</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>    tidyverse,</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>    devtools,</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>    shiny,</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>    data.table</span></code></pre><p></p></div>
    </div>
    <div class="section level2">
    <h2 id="ignoring-files">Ignoring files<a class="anchor" aria-label="anchor" href="#ignoring-files"></a></h2>
    <p>By default, renv will read your project's <code>.gitignore</code>s (if present) to
determine whether certain files or folders should be included when traversing
directories. If preferred, you can also create a <code>.renvignore</code> file (with
entries of the same format as a standard <code>.gitignore</code> file) to tell renv
which files to ignore within a directory. If both <code>.renvignore</code> and
<code>.gitignore</code> exist within a folder, the <code>.renvignore</code> will be used in lieu of
the <code>.gitignore</code>.</p>
<p>See <a href="https://git-scm.com/docs/gitignore" class="external-link">https://git-scm.com/docs/gitignore</a> for documentation on the
<code>.gitignore</code> format. Some simple examples here:</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ignore all R Markdown files</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="sc">*</span>.Rmd</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="co"># ignore all data folders</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>data<span class="sc">/</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="co"># ignore only data folders from the root of the project</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="er">/</span>data<span class="sc">/</span></span></code></pre><p></p></div>
<p>Using ignore files is important if your project contains a large number
of files; for example, if you have a <code>data/</code> directory containing many
text files.</p>
    </div>
    <div class="section level2">
    <h2 id="errors">Errors<a class="anchor" aria-label="anchor" href="#errors"></a></h2>
    <p>renv's attempts to enumerate package dependencies in your project can fail
-- most commonly, because of failures when attempting to parse your <span style="R">R</span> code.
You can use the <code>errors</code> argument to suppress these problems, but a
more robust solution is tell renv not to look at the problematic code.
As well as using <code>.renvignore</code>, as described above, you can also suppress errors
discovered within individual <code>.Rmd</code> chunks by including <code>renv.ignore=TRUE</code>
in the chunk header. For example:</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="st">```</span><span class="at">{r chunk-label, renv.ignore=TRUE}</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="at"># code in this chunk will be ignored by renv</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="st">```</span></span></code></pre><p></p></div>
<p>Similarly, if you'd like renv to parse a chunk that is otherwise ignored
(e.g. because it has <code>eval=FALSE</code> as a chunk header), you can set:</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="st">```</span><span class="at">{r chunk-label, eval=FALSE, renv.ignore=FALSE}</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="at"># code in this chunk will _not_ be ignored</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="st">```</span></span></code></pre><p></p></div>
    </div>
    <div class="section level2">
    <h2 id="development-dependencies">Development Dependencies<a class="anchor" aria-label="anchor" href="#development-dependencies"></a></h2>
    


<p>renv attempts to distinguish between 'development' dependencies and
'runtime' dependencies. For example, you might rely on e.g.
<a href="https://cran.r-project.org/package=devtools" class="external-link">devtools</a> and
<a href="https://cran.r-project.org/package=roxygen2" class="external-link">roxygen2</a> during development
for a project, but may not actually require these packages at runtime.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># find R package dependencies in the current directory</span></span></span>
<span class="r-in"><span><span class="fu">renv</span><span class="fu">::</span><span class="fu">dependencies</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


   </div>
  <footer><div class="container">
  <div class="pkgdown-footer-left">
  <p></p><p>Developed by Kevin Ushey, <a href="https://www.posit.co" class="external-link"><img src="https://www.tidyverse.org/posit-logo.svg" alt="Posit" height="16" style="margin-bottom: 3px;"></a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

  </div></footer><!-- Google Tag Manager (noscript) --><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KHBDBW7" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->


  </body></html>

